<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rincian Tugas Guru | SMAN 2 Sendawar</title>

<style>
body{
  margin:0;
  font-family:Segoe UI, sans-serif;
  background:#f1f5f9;
}

header{
  background:linear-gradient(135deg,#1e3a8a,#38bdf8);
  color:white;
  padding:32px 16px;
  text-align:center;
}

header h1{
  margin:0;
  font-size:1.6rem;
}

header p{
  margin-top:8px;
  font-size:.95rem;
  opacity:.9;
}

.container{
  max-width:1000px;
  margin:30px auto;
  padding:0 16px;
}

.card{
  background:white;
  border-radius:20px;
  padding:24px;
  box-shadow:0 10px 30px rgba(0,0,0,.08);
  animation:fadeUp .6s ease;
}

@keyframes fadeUp{
  from{opacity:0;transform:translateY(20px)}
  to{opacity:1;transform:translateY(0)}
}

.card h2{
  margin-top:0;
  color:#1e3a8a;
}

table{
  width:100%;
  border-collapse:collapse;
  margin-top:16px;
}

th,td{
  padding:12px;
  border-bottom:1px solid #e5e7eb;
  text-align:left;
  font-size:.95rem;
}

th{
  background:#f8fafc;
  color:#1e3a8a;
}

.total{
  margin-top:14px;
  font-weight:600;
  color:#0f172a;
}

.actions{
  margin-top:28px;
  display:flex;
  gap:14px;
  flex-wrap:wrap;
}

button{
  padding:14px 20px;
  border:none;
  border-radius:14px;
  font-size:1rem;
  cursor:pointer;
}

.btn-back{
  background:#64748b;
  color:white;
}

.btn-print{
  background:#22c55e;
  color:white;
}
</style>
</head>

<body>

<header>
  <h1 id="namaGuru">Nama Guru</h1>
  <p>Rincian Tugas Semester Genap Tahun Pelajaran 2025 / 2026</p>
</header>

<div class="container">
  <div class="card">
    <h2>Tugas Mengajar & Tugas Tambahan</h2>

    <div id="tabelTugas"></div>

    <div class="actions">
      <button class="btn-back" onclick="kembali()">Kembali</button>
      <button class="btn-print" onclick="cetakSK()">Cetak Lampiran SK</button>
    </div>
  </div>
</div>

<!-- ===== DATABASE ===== -->
<script src="data/master-guru.js"></script>
<script src="data/tugas-mengajar.js"></script>

<script>
const usernameAktif = localStorage.getItem("usernameAktif");
const namaGuru = localStorage.getItem("namaGuru");

if(!usernameAktif){
  window.location.href = "login.html";
}

// TAMPILKAN NAMA
document.getElementById("namaGuru").innerText = namaGuru;

// FILTER DATA
const dataGuru = tugasMengajar.filter(
  d => d.username === usernameAktif
);

const container = document.getElementById("tabelTugas");

if(dataGuru.length === 0){
  container.innerHTML = "<p>Data tugas belum tersedia.</p>";
}else{
  let totalJP = 0;

  let html = `
    <table>
      <tr>
        <th>No</th>
        <th>Tugas / Mata Pelajaran</th>
        <th>Kelas</th>
        <th>JP</th>
      </tr>
  `;

  dataGuru.forEach((d,i)=>{
    totalJP += d.jp;
    html += `
      <tr>
        <td>${i+1}</td>
        <td>${d.mapel}</td>
        <td>${d.kelas || "-"}</td>
        <td>${d.jp}</td>
      </tr>
    `;
  });

  html += `
    </table>
    <div class="total">Total Beban Tugas: ${totalJP} JP</div>
  `;

  container.innerHTML = html;
}

// NAVIGASI
function kembali(){
  window.location.href = "login.html";
}

function cetakSK(){
  window.location.href = "cetak-sk.html";
}
</script>

</body>
</html>
