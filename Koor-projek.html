<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Lampiran SK Koordinator Projek</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:"Times New Roman", serif;
  font-size:12pt;
  margin:40px;
}
h2,h3{
  text-align:center;
  margin:4px 0;
}
h3{
  font-weight:normal;
}
table{
  width:100%;
  border-collapse:collapse;
  margin-top:25px;
}
th,td{
  border:1px solid #000;
  padding:6px;
}
th{
  text-align:center;
}
.center{
  text-align:center;
}
.footer{
  margin-top:40px;
  width:100%;
}
.footer td{
  border:none;
}
@media print{
  body{ margin:30px; }
}
</style>
</head>

<body>

<h2>LAMPIRAN SURAT KEPUTUSAN</h2>
<h3>
NOMOR : 400.3.8/709/SMAN 2 SDWR/2025<br>
TENTANG PENUGASAN KOORDINATOR PROJEK<br>
SEMESTER GENAP TAHUN PELAJARAN 2025/2026
</h3>

<table>
<thead>
<tr>
  <th>No</th>
  <th>Nama Guru</th>
  <th>NIP</th>
  <th>Penugasan</th>
</tr>
</thead>
<tbody id="dataKoorProjek"></tbody>
</table>

<table class="footer">
<tr>
<td width="60%"></td>
<td>
Sendawar, 05 Januari 2026<br>
Kepala SMA Negeri 2 Sendawar<br><br><br><br>
<b>Fardinandus Erikson, S.Fil</b>
</td>
</tr>
</table>

<!-- DATABASE -->
<script src="data/username.js"></script>
<script src="data/pembagian-tugas.js"></script>

<script>
// ===================================================
// PARAMETER
// ===================================================
const params = new URLSearchParams(window.location.search);
const username = params.get("username");

// ===================================================
// REGEX FINAL KOORDINATOR PROJEK
// - Koordinator Projek
// - Koor. Projek
// ===================================================
const regexProjek = /koor\.?\s*projek|koordinator\s*projek/i;

// ===================================================
// FILTER DATA : HANYA KOORDINATOR PROJEK
// ===================================================
const dataKoorProjek = pembagianTugas.filter(t =>
  t.jenis === "tambahan" &&
  regexProjek.test(t.uraian) &&
  (!username || t.username === username)
);

// ===================================================
// TAMPILKAN DATA
// ===================================================
const tbody = document.getElementById("dataKoorProjek");
let no = 1;

if(dataKoorProjek.length === 0){
  tbody.innerHTML = `
    <tr>
      <td colspan="4" class="center" style="color:#777">
        Tidak terdapat penugasan Koordinator Projek
      </td>
    </tr>
  `;
}else{
  dataKoorProjek.forEach(item => {
    const guru = masterGuru.find(g => g.username === item.username) || {};

    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td class="center">${no++}</td>
      <td>${guru.nama || "-"}</td>
      <td class="center">${guru.nip || "-"}</td>
      <td>${item.uraian}</td>
    `;
    tbody.appendChild(tr);
  });
}
</script>

</body>
</html>
