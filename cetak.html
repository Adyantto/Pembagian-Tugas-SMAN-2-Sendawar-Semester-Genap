<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Lampiran SK Pembagian Tugas Guru</title>

<style>
body{
  margin:0;
  font-family:"Times New Roman", serif;
  background:#e5e7eb;
}

.page{
  width:210mm;
  min-height:297mm;
  background:#fff;
  margin:20px auto;
  padding:20mm;
}

/* KOP */
.kop img{
  width:100%;
}

/* JUDUL */
.judul{
  text-align:center;
  margin:18px 0;
}
.judul h3{
  margin:6px 0;
  font-weight:bold;
  text-decoration:none;
}
.nomor{
  margin:12px 0;
  font-size:12pt;
}
.tentang{
  font-size:12pt;
  line-height:1.5;
  margin-top:8px;
}

/* IDENTITAS */
.identitas{
  margin-top:40px;
  font-size:12pt;
}
.identitas td{
  padding:4px 0;
}

/* SUB JUDUL */
.subjudul{
  margin:14px 0 6px;
  font-weight:bold;
  font-size:12pt;
}

/* TABEL */
table{
  width:100%;
  border-collapse:collapse;
  font-size:12pt;
}
th, td{
  border:1px solid #000;
  padding:6px;
}
th{
  text-align:center;
  font-weight:bold;
}

/* SUBTOTAL */
.subtotal{
  margin-top:6px;
  font-weight:bold;
}

/* TTD */
.ttd{
  margin-top:50px;
}
.ttd .kanan{
  width:40%;
  float:right;
  text-align:center;
}
.clear{clear:both}

/* PAGE BREAK */
.halaman-depan{
  page-break-after:always;
}

/* PRINT */
@media print{
  body{background:#fff}
  .page{margin:0}
}
</style>
</head>

<body>

<!-- =====================================================
     HALAMAN 1 : HALAMAN DEPAN LAMPIRAN
===================================================== -->
<div class="page halaman-depan">

  <div class="kop">
    <img src="KOP SEKOLAH.png" alt="KOP SEKOLAH">
  </div>

  <hr style="border:1px solid #000; margin:10px 0 18px;">

  <div class="judul">
    <h3>LAMPIRAN</h3>
    <h3>SURAT KEPUTUSAN KEPALA SMA NEGERI 2 SENDAWAR</h3>

    <div class="nomor">
      NOMOR : 400.3.8/ __________ / SMAN 2 SDWR / 2026
    </div>

    <div style="font-weight:bold; margin:12px 0;">TENTANG</div>

    <div class="tentang">
      STRUKTUR ORGANISASI DAN PEMBAGIAN TUGAS GURU<br>
      DALAM PROSES BELAJAR MENGAJAR SERTA BIMBINGAN<br>
      PADA SEMESTER GENAP<br>
      TAHUN PELAJARAN 2025 / 2026
    </div>
  </div>

  <table class="identitas">
    <tr>
      <td width="30%">Nama Guru</td>
      <td width="5%">:</td>
      <td id="namaGuru"></td>
    </tr>
    <tr>
      <td>NIP</td>
      <td>:</td>
      <td id="nipGuru"></td>
    </tr>
  </table>

  <div class="ttd">
    <div class="kanan">
      <p>Ditetapkan di : Sendawar</p>
      <p>Pada Tanggal : 05 Januari 2026</p>
      <br>
      <p>Kepala SMA Negeri 2 Sendawar</p>
      <br><br><br>
      <p><b>Fardinandus Erikson, S.Fil</b><br>
      Penata Tk. I<br>
      NIP. 19691010 200801 1 026</p>
    </div>
    <div class="clear"></div>
  </div>

</div>

<!-- =====================================================
     HALAMAN 2 : RINCIAN PEMBAGIAN TUGAS
===================================================== -->
<div class="page">

  <div class="judul">
    <h3>RINCIAN PEMBAGIAN TUGAS GURU</h3>
  </div>

  <!-- TUGAS MENGAJAR -->
  <div class="subjudul">A. Tugas Mengajar</div>
  <table>
    <thead>
      <tr>
        <th width="5%">No</th>
        <th width="45%">Mata Pelajaran</th>
        <th width="35%">Kelas</th>
        <th width="15%">JP</th>
      </tr>
    </thead>
    <tbody id="tugasMengajar"></tbody>
  </table>
  <div class="subtotal" id="totalMengajar"></div>

  <!-- TUGAS TAMBAHAN -->
  <div class="subjudul">B. Tugas Tambahan</div>
  <table>
    <thead>
      <tr>
        <th width="5%">No</th>
        <th width="75%">Uraian Tugas Tambahan</th>
        <th width="20%">Bobot JP</th>
      </tr>
    </thead>
    <tbody id="tugasTambahan"></tbody>
  </table>
  <div class="subtotal" id="totalTambahan"></div>

</div>

<!-- =====================================================
     SCRIPT DATA
===================================================== -->
<script src="data/username.js"></script>
<script src="data/pembagian-tugas.js"></script>

<script>
const params = new URLSearchParams(window.location.search);
const username = params.get("username");

if(!username){
  alert("Data guru tidak ditemukan");
  window.location.href = "login.html";
}

const guru = masterGuru.find(g => g.username === username);
if(!guru){
  alert("Data guru tidak valid");
  window.location.href = "login.html";
}

document.getElementById("namaGuru").innerText = guru.nama;
document.getElementById("nipGuru").innerText = guru.nip;

const tugas = pembagianTugas.filter(t => t.username === username);

let noA = 1, noB = 1;
let jpA = 0, jpB = 0;

tugas.forEach(t => {
  if(t.jenis === "mengajar"){
    jpA += t.jp;
    document.getElementById("tugasMengajar").innerHTML += `
      <tr>
        <td align="center">${noA++}</td>
        <td>${t.uraian}</td>
        <td>${t.kelas}</td>
        <td align="center">${t.jp}</td>
      </tr>
    `;
  }
});

tugas.forEach(t => {
  if(t.jenis === "tambahan"){
    jpB += t.jp;
    document.getElementById("tugasTambahan").innerHTML += `
      <tr>
        <td align="center">${noB++}</td>
        <td>${t.uraian}</td>
        <td align="center">${t.jp}</td>
      </tr>
    `;
  }
});

document.getElementById("totalMengajar").innerText =
  "Jumlah JP Tugas Mengajar : " + jpA + " JP";

document.getElementById("totalTambahan").innerText =
  "Jumlah JP Tugas Tambahan : " + jpB + " JP";
</script>

</body>
</html>
